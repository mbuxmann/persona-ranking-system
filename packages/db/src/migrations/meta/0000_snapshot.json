{
  "id": "f3787e55-a1e7-44a4-af44-d763f0534fdd",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.companies": {
      "name": "companies",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "employee_range": {
          "name": "employee_range",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "industry": {
          "name": "industry",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_companies_domain": {
          "name": "idx_companies_domain",
          "columns": [
            {
              "expression": "domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "companies_domain_unique": {
          "name": "companies_domain_unique",
          "nullsNotDistinct": false,
          "columns": [
            "domain"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.leads": {
      "name": "leads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "company_id": {
          "name": "company_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "upload_id": {
          "name": "upload_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "job_title": {
          "name": "job_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "qualified": {
          "name": "qualified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "qualification_reasoning": {
          "name": "qualification_reasoning",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "company_rank": {
          "name": "company_rank",
          "type": "numeric(10, 0)",
          "primaryKey": false,
          "notNull": false
        },
        "ranking_reasoning": {
          "name": "ranking_reasoning",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ranked_at": {
          "name": "ranked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "ranking_session_id": {
          "name": "ranking_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_leads_company_id": {
          "name": "idx_leads_company_id",
          "columns": [
            {
              "expression": "company_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_company_rank": {
          "name": "idx_leads_company_rank",
          "columns": [
            {
              "expression": "company_rank",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_upload_id": {
          "name": "idx_leads_upload_id",
          "columns": [
            {
              "expression": "upload_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_ranked_at": {
          "name": "idx_leads_ranked_at",
          "columns": [
            {
              "expression": "ranked_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_qualified": {
          "name": "idx_leads_qualified",
          "columns": [
            {
              "expression": "qualified",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "leads_company_id_companies_id_fk": {
          "name": "leads_company_id_companies_id_fk",
          "tableFrom": "leads",
          "tableTo": "companies",
          "columnsFrom": [
            "company_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "leads_upload_id_uploads_id_fk": {
          "name": "leads_upload_id_uploads_id_fk",
          "tableFrom": "leads",
          "tableTo": "uploads",
          "columnsFrom": [
            "upload_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_lead_per_company": {
          "name": "unique_lead_per_company",
          "nullsNotDistinct": false,
          "columns": [
            "first_name",
            "last_name",
            "company_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.uploads": {
      "name": "uploads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "job_id": {
          "name": "job_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "upload_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "total_rows": {
          "name": "total_rows",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "companies_added": {
          "name": "companies_added",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "companies_updated": {
          "name": "companies_updated",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "leads_added": {
          "name": "leads_added",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "leads_skipped": {
          "name": "leads_skipped",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "ranking_job_id": {
          "name": "ranking_job_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_uploads_status": {
          "name": "idx_uploads_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uploads_job_id_unique": {
          "name": "uploads_job_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "job_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.evaluation_leads": {
      "name": "evaluation_leads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "job_title": {
          "name": "job_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "company_name": {
          "name": "company_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "company_domain": {
          "name": "company_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "employee_range": {
          "name": "employee_range",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "industry": {
          "name": "industry",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ground_truth_rank": {
          "name": "ground_truth_rank",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "ground_truth_reasoning": {
          "name": "ground_truth_reasoning",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_evaluation_leads_rank": {
          "name": "idx_evaluation_leads_rank",
          "columns": [
            {
              "expression": "ground_truth_rank",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.evaluation_results": {
      "name": "evaluation_results",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "prompt_version_id": {
          "name": "prompt_version_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "evaluation_lead_id": {
          "name": "evaluation_lead_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "predicted_rank": {
          "name": "predicted_rank",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "predicted_reasoning": {
          "name": "predicted_reasoning",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "absolute_error": {
          "name": "absolute_error",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "squared_error": {
          "name": "squared_error",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_evaluation_results_prompt_version_id": {
          "name": "idx_evaluation_results_prompt_version_id",
          "columns": [
            {
              "expression": "prompt_version_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_evaluation_results_evaluation_lead_id": {
          "name": "idx_evaluation_results_evaluation_lead_id",
          "columns": [
            {
              "expression": "evaluation_lead_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "evaluation_results_prompt_version_id_prompt_versions_id_fk": {
          "name": "evaluation_results_prompt_version_id_prompt_versions_id_fk",
          "tableFrom": "evaluation_results",
          "tableTo": "prompt_versions",
          "columnsFrom": [
            "prompt_version_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "evaluation_results_evaluation_lead_id_evaluation_leads_id_fk": {
          "name": "evaluation_results_evaluation_lead_id_evaluation_leads_id_fk",
          "tableFrom": "evaluation_results",
          "tableTo": "evaluation_leads",
          "columnsFrom": [
            "evaluation_lead_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.optimization_runs": {
      "name": "optimization_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "status": {
          "name": "status",
          "type": "optimization_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "starting_prompt_id": {
          "name": "starting_prompt_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "max_iterations": {
          "name": "max_iterations",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 5
        },
        "variants_per_iteration": {
          "name": "variants_per_iteration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 8
        },
        "beam_width": {
          "name": "beam_width",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 3
        },
        "best_prompt_id": {
          "name": "best_prompt_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "total_iterations": {
          "name": "total_iterations",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_prompts_generated": {
          "name": "total_prompts_generated",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "improvement_percentage": {
          "name": "improvement_percentage",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "trigger_job_id": {
          "name": "trigger_job_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_optimization_runs_status": {
          "name": "idx_optimization_runs_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_optimization_runs_starting_prompt_id": {
          "name": "idx_optimization_runs_starting_prompt_id",
          "columns": [
            {
              "expression": "starting_prompt_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_optimization_runs_best_prompt_id": {
          "name": "idx_optimization_runs_best_prompt_id",
          "columns": [
            {
              "expression": "best_prompt_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "optimization_runs_starting_prompt_id_prompt_versions_id_fk": {
          "name": "optimization_runs_starting_prompt_id_prompt_versions_id_fk",
          "tableFrom": "optimization_runs",
          "tableTo": "prompt_versions",
          "columnsFrom": [
            "starting_prompt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "optimization_runs_best_prompt_id_prompt_versions_id_fk": {
          "name": "optimization_runs_best_prompt_id_prompt_versions_id_fk",
          "tableFrom": "optimization_runs",
          "tableTo": "prompt_versions",
          "columnsFrom": [
            "best_prompt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompt_versions": {
      "name": "prompt_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "iteration_number": {
          "name": "iteration_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "prompt_text": {
          "name": "prompt_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_baseline": {
          "name": "is_baseline",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "beam_rank": {
          "name": "beam_rank",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "parent_version_id": {
          "name": "parent_version_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "optimization_run_id": {
          "name": "optimization_run_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "mae": {
          "name": "mae",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "rmse": {
          "name": "rmse",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "spearman_correlation": {
          "name": "spearman_correlation",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "kendall_tau": {
          "name": "kendall_tau",
          "type": "numeric(10, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deployed_at": {
          "name": "deployed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_prompt_versions_is_active": {
          "name": "idx_prompt_versions_is_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prompt_versions_optimization_run_id": {
          "name": "idx_prompt_versions_optimization_run_id",
          "columns": [
            {
              "expression": "optimization_run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prompt_versions_parent_version_id": {
          "name": "idx_prompt_versions_parent_version_id",
          "columns": [
            {
              "expression": "parent_version_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "prompt_versions_parent_version_id_prompt_versions_id_fk": {
          "name": "prompt_versions_parent_version_id_prompt_versions_id_fk",
          "tableFrom": "prompt_versions",
          "tableTo": "prompt_versions",
          "columnsFrom": [
            "parent_version_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "prompt_versions_optimization_run_id_optimization_runs_id_fk": {
          "name": "prompt_versions_optimization_run_id_optimization_runs_id_fk",
          "tableFrom": "prompt_versions",
          "tableTo": "optimization_runs",
          "columnsFrom": [
            "optimization_run_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.upload_status": {
      "name": "upload_status",
      "schema": "public",
      "values": [
        "queued",
        "processing",
        "completed",
        "failed"
      ]
    },
    "public.optimization_status": {
      "name": "optimization_status",
      "schema": "public",
      "values": [
        "running",
        "completed",
        "failed"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}